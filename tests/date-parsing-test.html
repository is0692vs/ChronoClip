<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChronoClip 日付抽出テスト</title>
  </head>
  <body>
    <h1>ChronoClip 日付抽出テスト</h1>

    <h2>テストケース</h2>
    <div id="test-cases">
      <p>
        <strong>1. 複合時刻パターン:</strong> 2025年10月11日 (土) 15:00
        開場16:00 開始
      </p>
      <p><strong>2. 年付き日付のみ:</strong> 2025年8月27日（水）</p>
      <p><strong>3. 年付き日付＋時刻:</strong> 2025年9月15日 14:30</p>
      <p>
        <strong>4. 年付き日付＋時刻（火曜）:</strong> 2025年12月25日(火) 18:00
      </p>
      <p><strong>5. 年付き日付のみ（元日）:</strong> 2025年1月1日</p>
      <p><strong>6. 月日＋時刻:</strong> 8月27日 18:00</p>
      <p><strong>7. 月日のみ:</strong> 9月1日のイベント</p>
      <p><strong>8. 相対日付:</strong> 明日の予定</p>
    </div>

    <h2>テスト結果</h2>
    <div id="results"></div>

    <button onclick="runTests()">テスト実行</button>

    <!-- chrono-nodeライブラリ -->
    <script src="../lib/chrono.min.js"></script>
    <!-- date-parser.js -->
    <script src="../lib/date-utils.js"></script>
    <script src="../lib/date-parser.js"></script>
    <!-- テストスクリプト -->
    <script src="date-extraction-test.js"></script>

    <script>
      function runTests() {
        const resultsDiv = document.getElementById("results");
        resultsDiv.innerHTML = "<h3>テスト実行中...</h3>";

        const testCases = [
          "2025年10月11日 (土) 15:00 開場16:00 開始",
          "2025年8月27日（水）",
          "2025年9月15日 14:30",
          "2025年12月25日(火) 18:00",
          "2025年1月1日",
          "8月27日 18:00",
          "9月1日のイベント",
          "明日の予定",
        ];

        let html = "<h3>テスト結果:</h3>";

        testCases.forEach((testCase, index) => {
          html += `<div style="margin: 10px 0; padding: 10px; border: 1px solid #ccc;">`;
          html += `<strong>${index + 1}. ${testCase}</strong><br>`;

          try {
            if (typeof parseDate !== "undefined") {
              const result = parseDate(testCase);
              if (result) {
                html += `<span style="color: green;">✅ 抽出成功</span><br>`;
                html += `型: ${result.type}, 信頼度: ${result.confidence}, ソース: ${result.source}<br>`;
                if (result.start) {
                  if (result.start.dateTime) {
                    html += `開始: ${result.start.dateTime}<br>`;
                  } else if (result.start.date) {
                    html += `開始日: ${result.start.date}<br>`;
                  }
                }
                if (result.end) {
                  if (result.end.dateTime) {
                    html += `終了: ${result.end.dateTime}<br>`;
                  } else if (result.end.date) {
                    html += `終了日: ${result.end.date}<br>`;
                  }
                }
              } else {
                html += `<span style="color: red;">❌ 抽出失敗</span><br>`;
              }
            } else {
              html += `<span style="color: red;">❌ parseDate関数が見つかりません</span><br>`;
            }
          } catch (error) {
            html += `<span style="color: red;">❌ エラー: ${error.message}</span><br>`;
          }

          html += "</div>";
        });

        resultsDiv.innerHTML = html;
      }
    </script>
  </body>
</html>
