<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChronoClip Performance Test - 100+ Dates</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .event {
            background: white;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .event h3 {
            margin-top: 0;
            color: #2196F3;
        }
        .event-date {
            font-weight: bold;
            color: #FF5722;
        }
        .event-time {
            color: #9C27B0;
            font-weight: 500;
        }
        .stats {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border: 2px solid #4CAF50;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 10000;
            min-width: 250px;
        }
        .stats h4 {
            margin-top: 0;
            color: #4CAF50;
        }
        .stats p {
            margin: 8px 0;
        }
        .stats span {
            font-weight: bold;
            color: #2196F3;
        }
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .success-indicator {
            color: #4CAF50;
            font-weight: bold;
        }
        .warning-indicator {
            color: #FF9800;
            font-weight: bold;
        }
        .viewport-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(33, 150, 243, 0.9);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 10000;
        }
    </style>
</head>
<body>
    <div class="stats">
        <h4>ğŸ“Š Performance Test</h4>
        <p>Total dates: <span id="date-count">0</span></p>
        <p>Page load: <span id="load-time">-</span></p>
        <p>Status: <span id="status">Loading...</span></p>
    </div>

    <div class="viewport-indicator" id="scroll-indicator">
        Scroll: 0%
    </div>

    <h1>ğŸš€ ChronoClip ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ - 100+ä»¶ã®æ—¥ä»˜</h1>
    
    <div class="info-box">
        <h3>ğŸ“ ã“ã®ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦</h3>
        <p>ã“ã®ãƒšãƒ¼ã‚¸ã«ã¯<strong>120å€‹ä»¥ä¸Šã®ã‚¤ãƒ™ãƒ³ãƒˆ</strong>ã¨<strong>600å€‹ä»¥ä¸Šã®æ—¥ä»˜/æ™‚åˆ»è¡¨ç¾</strong>ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p>
        <p>ChronoClipã®ä»¥ä¸‹ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ï¼š</p>
        <ul>
            <li>âœ… é…å»¶èª­ã¿è¾¼ã¿ (Lazy Loading with Intersection Observer)</li>
            <li>âœ… ãƒ‡ãƒã‚¦ãƒ³ã‚¹/ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°</li>
            <li>âœ… ä¸è¦ãªDOMæ“ä½œã®å‰Šæ¸›</li>
            <li>âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®è¨ˆæ¸¬</li>
        </ul>
        <p><strong>æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œï¼š</strong></p>
        <ul>
            <li>åˆæœŸè¡¨ç¤ºãŒ100msä»¥å†…ã§å®Œäº†ã™ã‚‹ã“ã¨</li>
            <li>ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒã‚¹ãƒ ãƒ¼ã‚ºã§ã‚ã‚‹ã“ã¨ï¼ˆ60FPSç¶­æŒï¼‰</li>
            <li>å…¨ã¦ã®æ—¥ä»˜ãŒæ­£ã—ãæ¤œå‡ºã•ã‚Œã‚‹ã“ã¨</li>
        </ul>
    </div>

    <div id="events-container"></div>

    <div class="info-box" style="margin-top: 40px;">
        <h3>ğŸ” æ¤œè¨¼æ–¹æ³•</h3>
        <ol>
            <li>Chrome DevToolsã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ã</li>
            <li>ã€ŒChronoClip: Date highlighting completeã€ã®ãƒ­ã‚°ã‚’ç¢ºèª</li>
            <li>å‡¦ç†æ™‚é–“ã¨ãƒãƒ¼ãƒ‰æ•°ã‚’ç¢ºèª</li>
            <li>ãƒšãƒ¼ã‚¸ã‚’ã‚†ã£ãã‚Šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦é…å»¶èª­ã¿è¾¼ã¿ã‚’ç¢ºèª</li>
            <li>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèª:
                <code style="display:block; background:#f5f5f5; padding:10px; margin:10px 0;">
                    // æ¤œå‡ºã•ã‚ŒãŸæ—¥ä»˜è¦ç´ æ•°<br>
                    document.querySelectorAll('.chronoclip-date').length
                </code>
            </li>
        </ol>
    </div>

    <script>
        const startTime = performance.now();
        const container = document.getElementById('events-container');
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
        const eventTemplates = [
            'å®šä¾‹ä¼šè­°',
            'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°',
            'æ–°è£½å“ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³',
            'ç¤¾å†…ç ”ä¿®',
            'æŠ€è¡“ã‚»ãƒŸãƒŠãƒ¼',
            'ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—',
            'ãƒãƒ¼ãƒ ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ™ãƒ³ãƒˆ',
            'æ‡‡è¦ªä¼š',
            'æ–°å¹´ä¼š',
            'ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹',
            'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å‹‰å¼·ä¼š',
            'ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¼š',
            'ã‚¹ãƒ—ãƒªãƒ³ãƒˆè¨ˆç”»',
            'ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³',
            'é¡§å®¢ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°'
        ];

        const locations = [
            'æ±äº¬æœ¬ç¤¾',
            'å¤§é˜ªæ”¯ç¤¾',
            'ä¼šè­°å®¤A',
            'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³',
            'ã‚«ãƒ•ã‚§ãƒ†ãƒªã‚¢',
            'ç¬¬1ä¼šè­°å®¤',
            'å¤šç›®çš„ãƒ›ãƒ¼ãƒ«'
        ];

        const today = new Date();
        let dateCount = 0;
        let eventCount = 0;

        // 120å€‹ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç”Ÿæˆ
        for (let i = 0; i < 120; i++) {
            const eventDate = new Date(today);
            eventDate.setDate(today.getDate() + i);
            
            const year = eventDate.getFullYear();
            const month = String(eventDate.getMonth() + 1).padStart(2, '0');
            const day = String(eventDate.getDate()).padStart(2, '0');
            
            // æ§˜ã€…ãªæ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
            const dateStr1 = `${year}å¹´${month}æœˆ${day}æ—¥`;
            const dateStr2 = `${year}-${month}-${day}`;
            const dateStr3 = `${year}/${month}/${day}`;
            const dateStr4 = `${parseInt(month)}æœˆ${parseInt(day)}æ—¥`;
            
            const hour = 9 + (i % 10);
            const minute = (i * 15) % 60;
            const endHour = hour + 2;
            const timeStr1 = `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;
            const timeStr2 = `${String(endHour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;
            
            const eventName = eventTemplates[i % eventTemplates.length];
            const location = locations[i % locations.length];
            
            const eventDiv = document.createElement('div');
            eventDiv.className = 'event';
            eventDiv.innerHTML = `
                <h3>${eventName} #${i + 1}</h3>
                <p><span class="event-date">${dateStr1}</span> <span class="event-time">${timeStr1}</span> é–‹å§‹</p>
                <p>æ—¥ä»˜: ${dateStr2} ã¾ãŸã¯ ${dateStr3} (${dateStr4})</p>
                <p>æ™‚é–“: ${timeStr1}ã‹ã‚‰${timeStr2}ã¾ã§</p>
                <p>å ´æ‰€: ${location}</p>
                <p>ç›¸å¯¾æ—¥ä»˜: ${i === 0 ? 'ä»Šæ—¥' : i === 1 ? 'æ˜æ—¥' : i === 7 ? 'æ¥é€±' : i === 30 ? 'æ¥æœˆ' : ''}</p>
            `;
            container.appendChild(eventDiv);
            eventCount++;
            
            // å„ã‚¤ãƒ™ãƒ³ãƒˆã«ç´„5å€‹ã®æ—¥ä»˜/æ™‚åˆ»ãŒå«ã¾ã‚Œã‚‹
            dateCount += 5;
        }

        // è¿½åŠ ã®æ—¥ä»˜ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ†ã‚¹ãƒˆ
        const additionalPatterns = [
            {
                title: 'æ—¥æœ¬èªç›¸å¯¾æ—¥ä»˜ãƒ‘ã‚¿ãƒ¼ãƒ³',
                content: 'ä»Šæ—¥ã€æ˜æ—¥ã€æ˜¨æ—¥ã€æ¥é€±ã€å…ˆé€±ã€ä»Šæœˆæœ«ã€æ¥æœˆã€å…ˆæœˆã®äºˆå®šãŒã‚ã‚Šã¾ã™ã€‚'
            },
            {
                title: 'å’Œæš¦ãƒ‘ã‚¿ãƒ¼ãƒ³',
                content: 'ä»¤å’Œ6å¹´12æœˆ25æ—¥ã€å¹³æˆ31å¹´4æœˆ1æ—¥ã€ä»¤å’Œå…ƒå¹´5æœˆ1æ—¥'
            },
            {
                title: 'æ§˜ã€…ãªæ™‚åˆ»ãƒ‘ã‚¿ãƒ¼ãƒ³',
                content: '09:00, 14:30, 18:45, 23:59, 00:00, 12:00'
            },
            {
                title: 'æœˆæ—¥ã®ã¿ã®ãƒ‘ã‚¿ãƒ¼ãƒ³',
                content: '12æœˆ25æ—¥ã€1æœˆ1æ—¥ã€3æœˆ15æ—¥ã€8æœˆ6æ—¥ã€11æœˆ23æ—¥'
            },
            {
                title: 'è¤‡æ•°ã®æ—¥ä»˜å½¢å¼',
                content: '2024å¹´12æœˆ25æ—¥ã€2024/12/31ã€2024-01-01ã€2025å¹´1æœˆ1æ—¥'
            }
        ];

        additionalPatterns.forEach((pattern, index) => {
            const div = document.createElement('div');
            div.className = 'event';
            div.innerHTML = `
                <h3>${pattern.title}</h3>
                <p>${pattern.content}</p>
            `;
            container.appendChild(div);
            dateCount += 5; // æ¦‚ç®—
        });

        document.getElementById('date-count').textContent = `${dateCount}+ (generated)`;
        document.getElementById('status').textContent = 'DOM Ready';

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
        let scrollTimeout;
        window.addEventListener('scroll', () => {
            clearTimeout(scrollTimeout);
            const scrollPercent = Math.round((window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100);
            document.getElementById('scroll-indicator').textContent = `Scroll: ${scrollPercent}%`;
            
            scrollTimeout = setTimeout(() => {
                document.getElementById('scroll-indicator').style.opacity = '0.5';
            }, 1000);
        });

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚é–“ã‚’è¨ˆæ¸¬
        window.addEventListener('load', () => {
            const loadTime = performance.now() - startTime;
            document.getElementById('load-time').textContent = `${loadTime.toFixed(2)}ms`;
            document.getElementById('status').innerHTML = '<span class="success-indicator">âœ“ Loaded</span>';
            
            console.log(`%c=== ChronoClip Performance Test ===`, 'color: #4CAF50; font-weight: bold; font-size: 14px;');
            console.log(`%cPage generated ${eventCount} events with ${dateCount}+ date expressions in ${loadTime.toFixed(2)}ms`, 'color: #2196F3;');
            console.log(`%cExpected ChronoClip behavior:`, 'font-weight: bold;');
            console.log('  1. Initial processing should complete within 100ms');
            console.log('  2. Lazy loading should be active for out-of-viewport dates');
            console.log('  3. Scroll should be smooth (60 FPS)');
            console.log('  4. All dates should be detected and highlighted');
            console.log(`%cTo check detected dates, run: document.querySelectorAll('.chronoclip-date').length`, 'color: #FF5722;');
            
            // 5ç§’å¾Œã«æ¤œå‡ºã•ã‚ŒãŸæ—¥ä»˜æ•°ã‚’ç¢ºèª
            setTimeout(() => {
                const detectedDates = document.querySelectorAll('.chronoclip-date').length;
                if (detectedDates > 0) {
                    console.log(`%câœ“ ChronoClip detected ${detectedDates} date elements`, 'color: #4CAF50; font-weight: bold;');
                    document.getElementById('date-count').textContent = `${detectedDates} detected`;
                    
                    // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¡¨ç¤º
                    if (detectedDates >= 100) {
                        console.log(`%câœ“ Performance test PASSED: ${detectedDates} dates detected (>= 100)`, 'color: #4CAF50; font-weight: bold; font-size: 16px;');
                        document.getElementById('status').innerHTML = '<span class="success-indicator">âœ“ Test PASSED</span>';
                    } else {
                        console.log(`%câš  Performance test WARNING: Only ${detectedDates} dates detected (expected >= 100)`, 'color: #FF9800; font-weight: bold;');
                        document.getElementById('status').innerHTML = '<span class="warning-indicator">âš  Low detection</span>';
                    }
                } else {
                    console.log('%câœ— No dates detected by ChronoClip. Please check if the extension is enabled.', 'color: #F44336; font-weight: bold;');
                    document.getElementById('status').innerHTML = '<span style="color: #F44336;">âœ— Not detected</span>';
                }
            }, 5000);
        });
    </script>
</body>
</html>
